/*!
 * jQuery fancyTable plugin v1.0.26
 * https://github.com/myspace-nu
 *
 * Copyright 2018 Johan Johansson
 * Released under the MIT license
 */

!function(l){l.fn.fancyTable=function(a){var s=l.extend({inputStyle:"",inputPlaceholder:"Search...",pagination:!1,paginationClass:"btn btn-light",paginationClassActive:"active",pagClosest:3,perPage:10,sortable:!0,searchable:!0,matchCase:!1,exactMatch:!1,onInit:function(){},onUpdate:function(){},sortFunction:function(a,e,t){return"numeric"==t.sortAs[t.sortColumn]?0<t.sortOrder?parseFloat(a)-parseFloat(e):parseFloat(e)-parseFloat(a):a<e?-t.sortOrder:e<a?t.sortOrder:0},testing:!1},a),o=this;return this.settings=s,this.tableUpdate=function(n){if(n.fancyTable.matches=0,l(n).find("tbody tr").each(function(){var a=0,e=!0,t=!1;l(this).find("td").each(function(){s.globalSearch||!n.fancyTable.searchArr[a]||o.isSearchMatch(l(this).html(),n.fancyTable.searchArr[a])?!s.globalSearch||n.fancyTable.search&&!o.isSearchMatch(l(this).html(),n.fancyTable.search)||Array.isArray(s.globalSearchExcludeColumns)&&s.globalSearchExcludeColumns.includes(a+1)||(t=!0):e=!1,a++}),s.globalSearch&&t||!s.globalSearch&&e?(n.fancyTable.matches++,!s.pagination||n.fancyTable.matches>n.fancyTable.perPage*(n.fancyTable.page-1)&&n.fancyTable.matches<=n.fancyTable.perPage*n.fancyTable.page?l(this).show():l(this).hide()):l(this).hide()}),n.fancyTable.pages=Math.ceil(n.fancyTable.matches/n.fancyTable.perPage),s.pagination){var a=n.fancyTable.paginationElement?l(n.fancyTable.paginationElement):l(n).find(".pag");a.empty();for(var e,t=1;t<=n.fancyTable.pages;t++)(1==t||t>n.fancyTable.page-(s.pagClosest+1)&&t<n.fancyTable.page+(s.pagClosest+1)||t==n.fancyTable.pages)&&(e=l("<a>",{html:t,"data-n":t,style:"margin:0.2em",class:s.paginationClass+" "+(t==n.fancyTable.page?s.paginationClassActive:"")}).css("cursor","pointer").bind("click",function(){n.fancyTable.page=l(this).data("n"),o.tableUpdate(n)}),t==n.fancyTable.pages&&n.fancyTable.page<n.fancyTable.pages-s.pagClosest-1&&a.append(l("<span>...</span>")),a.append(e),1==t&&n.fancyTable.page>s.pagClosest+2&&a.append(l("<span>...</span>")))}s.onUpdate.call(this,n)},this.isSearchMatch=function(a,e){s.matchCase||(a=a.toUpperCase(),e=e.toUpperCase());var t=s.exactMatch;return"auto"==t&&e.match(/^\".*?\"$/)?(t=!0,e=e.substring(1,e.length-1)):t=!1,t?a==e:new RegExp(e).test(a)},this.reinit=function(a){l(this).each(function(){l(this).find("th a").contents().unwrap(),l(this).find("tr.fancySearchRow").remove()}),l(this).fancyTable(this.settings)},this.tableSort=function(t){var a,e;void 0!==t.fancyTable.sortColumn&&t.fancyTable.sortColumn<t.fancyTable.nColumns&&(a=0,l(t).find("thead th").each(function(){l(this).attr("aria-sort",a==t.fancyTable.sortColumn?1==t.fancyTable.sortOrder?"ascending":-1==t.fancyTable.sortOrder?"descending":"other":null),a++}),l(t).find("thead th div.sortArrow").each(function(){l(this).remove()}),(e=l("<div>",{class:"sortArrow"}).css({margin:"0.1em",display:"inline-block",width:0,height:0,"border-left":"0.4em solid transparent","border-right":"0.4em solid transparent"})).css(0<t.fancyTable.sortOrder?{"border-top":"0.4em solid #000"}:{"border-bottom":"0.4em solid #000"}),l(t).find("thead th a").eq(t.fancyTable.sortColumn).append(e),e=l(t).find("tbody tr").toArray().sort(function(a,e){a=l(a).find("td").eq(t.fancyTable.sortColumn),e=l(e).find("td").eq(t.fancyTable.sortColumn),a=l(a).data("sortvalue")?l(a).data("sortvalue"):a.html(),e=l(e).data("sortvalue")?l(e).data("sortvalue"):e.html();return"case-insensitive"==t.fancyTable.sortAs[t.fancyTable.sortColumn]&&(a=a.toLowerCase(),e=e.toLowerCase()),s.sortFunction.call(this,a,e,t.fancyTable)}),l(t).find("tbody").empty().append(e))},this.each(function(){if("TABLE"!==l(this).prop("tagName"))return console.warn("fancyTable: Element is not a table."),!0;var t,a,e,n,r=this;r.fancyTable={nColumns:l(r).find("td").first().parent().find("td").length,nRows:l(this).find("tbody tr").length,perPage:s.perPage,page:1,pages:0,matches:0,searchArr:[],search:"",sortColumn:s.sortColumn,sortOrder:void 0!==s.sortOrder&&(new RegExp("desc","i").test(s.sortOrder)||-1==s.sortOrder)?-1:1,sortAs:[],paginationElement:s.paginationElement},0==l(r).find("tbody").length&&(e=l(r).html(),l(r).empty(),l(r).append("<tbody>").append(l(e))),0==l(r).find("thead").length&&l(r).prepend(l("<thead>")),s.sortable&&(n=0,l(r).find("thead th").each(function(){r.fancyTable.sortAs.push("numeric"==l(this).data("sortas")?"numeric":"case-insensitive"==l(this).data("sortas")?"case-insensitive":null);var a=l(this).html(),a=l("<a>",{href:"#","aria-label":"Sort by "+l(this).text(),html:a,"data-n":n,class:""}).css({cursor:"pointer",color:"inherit","text-decoration":"none"}).bind("click",function(){return r.fancyTable.sortColumn==l(this).data("n")?r.fancyTable.sortOrder=-r.fancyTable.sortOrder:r.fancyTable.sortOrder=1,r.fancyTable.sortColumn=l(this).data("n"),o.tableSort(r),o.tableUpdate(r),!1});l(this).empty(),l(this).append(a),n++})),s.searchable&&(t=l("<tr>").addClass("fancySearchRow"),s.globalSearch?(a=l("<input>",{"aria-label":"Search table",placeholder:s.inputPlaceholder,style:"width:100%;box-sizing:border-box;"+s.inputStyle}).bind("change paste keyup",function(){r.fancyTable.search=l(this).val(),r.fancyTable.page=1,o.tableUpdate(r)}),e=l("<th>",{style:"padding:2px;"}).attr("colspan",r.fancyTable.nColumns),l(a).appendTo(l(e)),l(e).appendTo(l(t))):(n=0,l(r).find("td").first().parent().find("td").each(function(){r.fancyTable.searchArr.push("");var a=l("<input>",{"aria-label":"Search column","data-n":n,placeholder:s.inputPlaceholder,style:"width:100%;box-sizing:border-box;"+s.inputStyle}).bind("change paste keyup",function(){r.fancyTable.searchArr[l(this).data("n")]=l(this).val(),r.fancyTable.page=1,o.tableUpdate(r)}),e=l("<th>",{style:"padding:2px;"});l(a).appendTo(l(e)),l(e).appendTo(l(t)),n++})),t.appendTo(l(r).find("thead"))),o.tableSort(r),s.pagination&&!s.paginationElement&&(l(r).find("tfoot").remove(),l(r).append(l("<tfoot><tr></tr></tfoot>")),l(r).find("tfoot tr").append(l("<td class='pag'></td>",{}).attr("colspan",r.fancyTable.nColumns))),o.tableUpdate(r),s.onInit.call(this,r)}),this}}(jQuery);